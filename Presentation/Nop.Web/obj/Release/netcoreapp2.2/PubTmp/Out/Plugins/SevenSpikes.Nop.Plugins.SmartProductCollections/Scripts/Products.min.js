/*
* Copyright 2018 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

!function(d){var t=d(window),a=d(".spc-slick-slider-settings"),s=a.attr("data-showitemsincarousel"),o=a.attr("data-slickcategorysettings"),r=a.attr("data-slickproductsettings"),n=a.attr("data-categoryresponsivebreakpoints"),c=a.attr("data-productresponsivebreakpoints"),e=function(){var a=t.scrollTop()+t.outerHeight();d(".spc-products[notLoaded]").each(function(){var t=d(this);t.offset().top<a&&(t.removeAttr("notLoaded"),t.find(".tab:first").click())}),d(".spc-categories[notLoaded]").each(function(){var e=d(this);e.offset().top<a&&(e.removeAttr("notLoaded"),d.ajax({url:e.attr("data-getCategoryGroupInfoUrl"),type:"POST",data:{categoryId:parseInt(e.attr("data-categoryGroupId"))||0}}).done(function(t){e.html(t),e.find(".navigation .tab:first-of-type").removeAttr("notLoaded").addClass("active"),e.find(".category-products .product-grid:first-of-type").addClass("active");var a=e.find(".item-grid:first");s&&a.length&&0<a.find(".item-box").length?l(a,"category"):d.event.trigger({type:"newProductsAddedToPageEvent"})}).fail(function(){e.remove()}))}),0===d(".spc-products[notLoaded], .spc-categories[notLoaded]").length&&t.off("scroll.smart-products")};function l(t,a,e){if(t.length&&!t.hasClass("slick-initialized")&&0!=t.find(".item-box").length){var i={};try{i="category"==a?JSON.parse(o):JSON.parse(r)}catch(t){console.log("Invalid category/product collection settings value!")}try{i.responsive="category"==a?JSON.parse(n):JSON.parse(c)}catch(t){console.log("Invalid category/product breakpoints setting value!")}t.on("init",function(){e&&g(t,e),d.event.trigger({type:"newProductsAddedToPageEvent"})}),i.rtl="rtl"==d("html").attr("dir"),t.slick(i)}}function g(t,a){var e=d("img",t),i=e.length;0===i&&a.find(".loading-overlay").fadeOut(),e.load(function(){--i<=0&&a.find(".loading-overlay").fadeOut()})}d(document).ready(function(){d(".spc-products .tab").off("click.smartproductcollections").on("click.smartproductcollections",function(t){t.preventDefault();var e=d(this),a=parseInt(e.attr("data-tabId"));if(!isNaN(a)){var i=e.closest(".spc-products"),o=i.find('.spc-body .product-grid[data-tabId="'+a+'"]');e.hasClass("loaded")?(e.addClass("active").siblings(".tab").removeClass("active"),i.find('.spc-body .product-grid[data-tabId="'+a+'"]').addClass("active").siblings(".product-grid").removeClass("active"),o.find(".item-grid").hasClass("slick-initialized")&&o.find(".item-grid").slick("setPosition")):(e.addClass("loaded"),i.find(".loading-overlay").show(),d.ajax({url:i.attr("data-getItemProductsUrl"),type:"POST",data:{id:a}}).done(function(t){o.find(".item-grid").html(t),e.addClass("active").siblings(".tab").removeClass("active"),o.addClass("active").siblings(".product-grid").removeClass("active");var a=o.find(".item-grid");s&&a.length&&0<a.find(".item-box").length?l(a,"product",i):(g(o,i),d.event.trigger({type:"newProductsAddedToPageEvent"}))}))}}),d(".spc-products").on("change",".mobile-navigation select",function(){var t=d(this);t.closest(".spc-products").find('.navigation .tab[data-tabId="'+t.val()+'"]').click()}),d(".spc-categories").on("click",".navigation .tab",function(){var e=d(this),t=parseInt(e.attr("data-tabId"))||0,i=e.closest(".spc-categories"),a=parseInt(i.attr("data-categoryGroupId"))||0,o=i.find('.category-products .product-grid[data-tabId="'+t+'"]');e.is("[notLoaded]")?(e.removeAttr("notLoaded"),i.find(".loading-overlay").show(),d.ajax({url:i.attr("data-getItemProductsUrl"),type:"POST",data:{id:t,categoryId:a}}).done(function(t){o.children(".item-grid").html(t),e.addClass("active").siblings(".tab").removeClass("active"),o.addClass("active").siblings(".product-grid").removeClass("active");var a=o.find(".item-grid");s&&a.length&&0<a.find(".item-box").length?l(a,"category",i):(g(o,i),d.event.trigger({type:"newProductsAddedToPageEvent"}))})):(e.addClass("active").siblings(".tab").removeClass("active"),o.addClass("active").siblings(".product-grid").removeClass("active"),o.find(".item-grid").hasClass("slick-initialized")&&o.find(".item-grid").slick("setPosition")),i.find('.category-mobile-navigation-select option[value="'+t+'"]').attr("selected","selected")}),d(".spc-categories").on("change",".mobile-navigation select",function(){var t=d(this);t.closest(".spc-categories").find('.navigation .tab[data-tabId="'+t.val()+'"]').click()}),setTimeout(e,200),t.on("scroll.smart-products",e)})}(jQuery);